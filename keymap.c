#include QMK_KEYBOARD_H

#define _WIN    0
#define _MAC    1
#define _SYMB   2
#define _KEYPAD 3
#define _ADJUST 4

#define KEYPAD_SPC  LT(_KEYPAD, KC_SPC)
#define SYMB_SPC    LT(_SYMB,KC_SPC)
#define OSM_LSFT    OSM(MOD_LSFT)
#define OSM_RSFT    OSM(MOD_RSFT)

// _WIN
#define W_OSM_LCS     OSM(MOD_LCTL|MOD_LSFT)
#define W_OSM_LCA     OSM(MOD_LCTL|MOD_LALT)
#define W_LCTL_TAB    LCTL_T(KC_TAB)
#define W_LCTL_ESC    LCTL_T(KC_ESC)
#define W_LALT_LANG   LALT_T(KC_LANG1)

// _MAC
#define M_OSM_LCS     OSM(MOD_LGUI|MOD_LSFT)
#define M_OSM_LCMO    OSM(MOD_LGUI|MOD_LALT)
#define M_OSM_LCTO    OSM(MOD_LCTL|MOD_LALT)
#define M_LCMD_TAB    LCMD_T(KC_TAB)
#define M_LCMD_ESC    LCMD_T(KC_ESC)
#define M_LOPT_LANG   LOPT_T(KC_LANG1)

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
  [_WIN] = LAYOUT(
  //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                                           ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
     KC_GRV      , KC_1       , KC_2       , KC_3       , KC_4       , KC_5       ,                                                             KC_7       , KC_8       , KC_9       , KC_0       , KC_MINS    , KC_EQL     ,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┐                                 ┌────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     KC_TAB      , KC_Q       , KC_W       , KC_E       , KC_R       , KC_T       , KC_6       ,                                  MO(_ADJUST) , KC_Y       , KC_U       , KC_I       , KC_O       , KC_P       , KC_BSLS    ,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                 ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     W_LCTL_ESC  , KC_A       , KC_S       , KC_D       , KC_F       , KC_G       , KC_HOME    ,                                  KC_END      , KC_H       , KC_J       , KC_K       , KC_L       , KC_SCLN    , KC_QUOT    ,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┐       ┌────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     OSM_LSFT    , KC_Z       , KC_X       , KC_C       , KC_V       , KC_B       , KC_PGDN    , KC_PGUP    ,        PB_10       , PB_11      , KC_N       , KC_M       , KC_COMM    , KC_DOT     , KC_SLSH    , OSM_RSFT   ,
  //├────────────┼────────────┼────────────┼────────────┼──────┬─────┴─────┬──────┼────────────┼────────────┤       ├────────────┼────────────┼──────┬─────┴─────┬──────┼────────────┼────────────┼────────────┼────────────┤
     W_OSM_LCS   , W_OSM_LCA  , KC_LGUI    , W_LALT_LANG       , KEYPAD_SPC       , W_LCTL_TAB , KC_DEL     ,        KC_BSPC     , KC_ENT     ,       SYMB_SPC   ,       KC_LEFT     , KC_DOWN    , KC_UP      , KC_RGHT
  //└────────────┴────────────┴────────────┴────────────┘      └───────────┘      └────────────┴────────────┘       └────────────┴────────────┘      └───────────┘      └────────────┴────────────┴────────────┴────────────┘
  ),

  [_MAC] = LAYOUT(
  //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                                           ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
     KC_GRV      , KC_1       , KC_2       , KC_3       , KC_4       , KC_5       ,                                                             KC_7       , KC_8       , KC_9       , KC_0       , KC_MINS    , KC_EQL     ,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┐                                 ┌────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     KC_TAB      , KC_Q       , KC_W       , KC_E       , KC_R       , KC_T       , KC_6       ,                                  MO(_ADJUST) , KC_Y       , KC_U       , KC_I       , KC_O       , KC_P       , KC_BSLS    ,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                 ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     W_LCTL_ESC  , KC_A       , KC_S       , KC_D       , KC_F       , KC_G       , KC_HOME    ,                                  KC_END      , KC_H       , KC_J       , KC_K       , KC_L       , KC_SCLN    , KC_QUOT    ,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┐       ┌────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     OSM_LSFT    , KC_Z       , KC_X       , KC_C       , KC_V       , KC_B       , KC_PGDN    , KC_PGUP    ,        PB_10       , PB_11      , KC_N       , KC_M       , KC_COMM    , KC_DOT     , KC_SLSH    , OSM_RSFT   ,
  //├────────────┼────────────┼────────────┼────────────┼──────┬─────┴─────┬──────┼────────────┼────────────┤       ├────────────┼────────────┼──────┬─────┴─────┬──────┼────────────┼────────────┼────────────┼────────────┤
     M_OSM_LCS   , M_OSM_LCMO , M_OSM_LCTO , M_LOPT_LANG       , KEYPAD_SPC       , M_LCMD_TAB , KC_DEL     ,        KC_BSPC     , KC_ENT     ,       SYMB_SPC   ,       KC_LEFT     , KC_DOWN    , KC_UP      , KC_RGHT
  //└────────────┴────────────┴────────────┴────────────┘      └───────────┘      └────────────┴────────────┘       └────────────┴────────────┘      └───────────┘      └────────────┴────────────┴────────────┴────────────┘
  ),

  [_SYMB] = LAYOUT(
  //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                                           ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
     _______     , KC_F1      , KC_F2      , KC_F3      , KC_F4      , KC_F5      ,                                                            KC_F7       , KC_F8      , KC_F9      , KC_F10     , KC_F11     ,  KC_F12    ,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┐                                 ┌────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______     , KC_PPLS    , KC_PAST    , KC_LCBR    , KC_RCBR    , KC_PIPE    , KC_F6      ,                                  _______     , _______    , KC_WH_U    , KC_UP      , _______    , _______    , _______    ,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                 ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     KC_CAPS     , KC_HASH    , KC_DLR     , KC_LPRN    , KC_RPRN    , KC_AMPR    , _______    ,                                  _______     , KC_WH_L    , KC_LEFT    , KC_DOWN    , KC_RGHT    , KC_WH_R    , _______    ,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┐       ┌────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______     , KC_PERC    , KC_CIRC    , KC_LBRC    , KC_RBRC    , KC_PEQL    , _______    , _______    ,        _______     , _______    , _______    , KC_WH_D    , _______    , _______    , _______    , _______    ,
  //├────────────┼────────────┼────────────┼────────────┼──────┬─────┴─────┬──────┼────────────┼────────────┤       ├────────────┼────────────┼──────┬─────┴─────┬──────┼────────────┼────────────┼────────────┼────────────┤
     _______     , _______    , _______    , _______    ,       _______    ,       KC_LEAD     , _______    ,        _______     , _______    ,       _______    ,       _______     , _______    , _______    , _______
  //└────────────┴────────────┴────────────┴────────────┘      └───────────┘      └────────────┴────────────┘       └────────────┴────────────┘      └───────────┘      └────────────┴────────────┴────────────┴────────────┘
  ),

  [_KEYPAD] = LAYOUT(
  //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                                           ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
     _______     , KC_F1      , KC_F2      , KC_F3      , KC_F4      , KC_F5      ,                                                            KC_F7       , KC_F8      , KC_F9      , KC_F10     , KC_F11     , KC_F12    ,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┐                                 ┌────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______     , KC_BTN2    , KC_BTN3    , KC_MS_U    , KC_WH_U    , KC_BTN1    , KC_F6      ,                                  _______     , KC_NUM     , KC_KP_7    , KC_KP_8    , KC_KP_9    , KC_PMNS    , KC_COMMA   ,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                 ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______     , KC_WH_L    , KC_MS_L    , KC_MS_D    , KC_MS_R    , KC_WH_R    , _______    ,                                  _______     , _______    , KC_KP_4    , KC_KP_5    , KC_KP_6    , KC_PSLS    , KC_KP_DOT  ,
  //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┐       ┌────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
     _______     , _______    , _______    , _______    , KC_WH_D    , _______    , _______    , _______    ,        _______     , _______    , KC_KP_0    , KC_KP_1    , KC_KP_2    , KC_KP_3    , KC_PEQL    , _______    ,
  //├────────────┼────────────┼────────────┼────────────┼──────┬─────┴─────┬──────┼────────────┼────────────┤       ├────────────┼────────────┼──────┬─────┴─────┬──────┼────────────┼────────────┼────────────┼────────────┤
     _______     , _______    , _______    , _______    ,       _______    ,       _______     , _______    ,        _______     , _______    ,       _______    ,       _______     , _______    , _______    , _______
  //└────────────┴────────────┴────────────┴────────────┘      └───────────┘      └────────────┴────────────┘       └────────────┴────────────┘      └───────────┘      └────────────┴────────────┴────────────┴────────────┘
  ),

  [_ADJUST] = LAYOUT(
    //┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐                                                           ┌────────────┬────────────┬────────────┬────────────┬────────────┬────────────┐
       RESET       , TO(_WIN)   , TO(_MAC)   , XXXXXXX    , XXXXXXX    , XXXXXXX    ,                                                            XXXXXXX     , XXXXXXX    , XXXXXXX    , XXXXXXX    , XXXXXXX    , XXXXXXX    ,
    //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┐                                 ┌────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
       XXXXXXX     , XXXXXXX    , KC_ACL2    , XXXXXXX    , XXXXXXX    , XXXXXXX    , XXXXXXX    ,                                  XXXXXXX     , XXXXXXX    , XXXXXXX    , XXXXXXX    , XXXXXXX    , XXXXXXX    , XXXXXXX    ,
    //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤                                 ├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
       XXXXXXX     , XXXXXXX    , KC_ACL1    , XXXXXXX    , XXXXXXX    , XXXXXXX    , XXXXXXX    ,                                  XXXXXXX     , XXXXXXX    , XXXXXXX    , XXXXXXX    , XXXXXXX    , XXXXXXX    , XXXXXXX    ,
    //├────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┐       ┌────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┼────────────┤
       XXXXXXX     , XXXXXXX    , KC_ACL0    , XXXXXXX    , XXXXXXX    , XXXXXXX    , XXXXXXX    , XXXXXXX    ,        XXXXXXX     , XXXXXXX    , XXXXXXX    , XXXXXXX    , XXXXXXX    , XXXXXXX    , XXXXXXX    , XXXXXXX    ,
    //├────────────┼────────────┼────────────┼────────────┼──────┬─────┴─────┬──────┼────────────┼────────────┤       ├────────────┼────────────┼──────┬─────┴─────┬──────┼────────────┼────────────┼────────────┼────────────┤
       XXXXXXX     , XXXXXXX    , XXXXXXX    , XXXXXXX    ,       XXXXXXX    ,       XXXXXXX     , XXXXXXX    ,        XXXXXXX     , XXXXXXX    ,       XXXXXXX    ,       XXXXXXX     , XXXXXXX    , XXXXXXX    , XXXXXXX
    //└────────────┴────────────┴────────────┴────────────┘      └───────────┘      └────────────┴────────────┘       └────────────┴────────────┘      └───────────┘      └────────────┴────────────┴────────────┴────────────┘
    )
};

layer_state_t layer_state_set_user(layer_state_t state) {
//    set_led_off
//    set_led_white
//    set_led_blue
//    set_led_red
//    set_led_magenta
    switch (get_highest_layer(state)) {
        case _MAC:
            set_led_green;
            break;
        case _ADJUST:
            set_led_red;
            break;
        default:
            set_led_off;
    }
    return state;
}

const uint16_t PROGMEM esc_combo[] = {KC_J, KC_K, COMBO_END};
combo_t key_combos[COMBO_COUNT] = {
    COMBO(esc_combo, KC_ESC),
};
